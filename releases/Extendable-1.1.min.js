function Extendable(a,b){if(this===window)return new Extendable(a);a&&this.merge(this,a),b?(this.parent=b,this.ROOT=this.parent.ROOT):this.ROOT=this,this._eventMap={}}Extendable.prototype={constructor:Extendable,merge:function(a,b,c){var d;for(d in b)if(!!c||!a[d])a[d]=b[d]},make:function(a){var b=this,c,d,e=a?a.split("."):[],f=e.length;for(d=0;d<f;d++)c=e[d],b[c]||(b[c]=new Extendable({},b)),b=b[c];return b},extend:function(a,b,c){typeof a==="string"&&(a=this.make(a)),this.merge(a,b,!!c)},_events:function(a){this._eventMap[a]||(this._eventMap[a]=[]);return this._eventMap[a]},on:function(a,b,c){var d=this._events(a);typeof b=="function"&&(c=c||0,d.push({tty:c,cb:b}),this.emit("newListener",b))},once:function(a,b){this.on(a,b,1)},listeners:function(a){var b,c=this._events(a),d=[];for(var b in c)c[b]!==!1&&d.push(c[b].cb);return d},emit:function(){var a,b=[].slice.call(arguments),c=b.shift(),d=this._events(c),e;for(a=0;a<d.length;a++){if(d[a]===!1)continue;e=d[a],e.tty===1?d[a]=!1:e.tty>1&&(e.tty=e.tty-1),e.cb.apply(this,b)}},removeListener:function(a,b){var c,d=this._events(a);for(c=0;c<d.length;c++){if(d[c]==!1)continue;if(d[c].cb==b){d[c]=!1;continue}}}}